# 三维寻路算法

## 设计思路:
    
    尽量以最小代价解决路径导航问题。
    
## 基础数据:

    一个大型区域作为根节点，以树为结构生成的内部细分的区域为子节点。每个节点附带区域内的最高高程作为门票。
    无人机本身可以飞行的最高高度
    
## 其他信息:

    一个输入爬升高度或平飞长度的函数，返回值为0-100表示无人机经过此道路大约需要消耗的电量。如果没有则无视电量损耗。
    拟传入参数为{height: Number, length: Number} 
    如果length = 0 和 height != 0 为爬升高度。 
    如果 length !=0 为在 height 的高度下的平飞距离。
    
## 计算流程:

    如果传入的两点在路网上或者路网附近(m米)，则直接采用原有2D路网寻路路径并抬高高程。
    之后根据无人机可以飞行的最高高程和起点与终点寻找可以可以直接平飞过的最低层数。
    如果该层网格数小于等于64尝试贪心算法(爬楼算法+动态网格)
    其他情况则用已经切好的层数信息作为静态网格使用A*寻找最短路径
    之后将最短路径放入耗电量函数中得出此路径是否可用。
    如果不可用则降低高度(层数提高)后再次寻找最短路径。
    
## 拟使用算法:

### 2D路网寻路算法:

    经典2D路网寻路算法

### 贪心算法:

    根据传入的层数直接尝试将无人机抬升到所需高度后平飞至目的地后降落。
    是一种动态获取网格并保持尽量直线飞行和调整高度的力求降低复杂度和快速计算。

### A*:

    在静态网格下寻路
      
## 区域切分规则:
    
    在每一级保留切分区域内的最高高程
    建筑物整体包围盒视为最小粒度不可再次切分
    原则上根节点为整个区域，第一级为主干道切割区域,第二级为街区切割区域，第三级按照街区内楼宇形状切分。

## 区域切分组织形式:

    瓦片形式，传递区域编号。
    区域编号获取方式: 类似于地形瓦片的layer.json 使用min,max 的范围规定瓦片的级别。
    
## 预留问题

    是否需要组织大规模无人机飞行